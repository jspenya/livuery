webpackJsonp([1],{"2AaF":function(t,e){},"9M+g":function(t,e){},BRI5:function(t,e){},"J+Sg":function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("7+uW"),n={name:"Header",created:function(){this.signedIn()},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},signedIn:function(){return localStorage.signedIn},signOut:function(){var t=this;this.$http.secured.delete("/signin").then(function(e){return delete localStorage.csrf,delete localStorage.signedIn,t.$router.replace("/"),window.location.reload(),!1}).catch(function(e){return t.setError(e,"Cannot sign out")})}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{padding:"0 3rem"}},[o("nav",{staticClass:"navbar navbar-expand-md navbar-dark"},[o("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Library Management System")]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"collapse navbar-collapse",attrs:{id:"toggleMobileMenu"}},[o("ul",{staticClass:"navbar-nav ms-auto text-center"},[o("li",[t.signedIn()?t._e():o("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Sign in")])],1),t._v(" "),o("li",[t.signedIn()?t._e():o("router-link",{staticClass:"nav-link",attrs:{to:"/signup"}},[t._v("Sign Up")])],1),t._v(" "),o("li",[t.signedIn()?o("router-link",{staticClass:"nav-link",attrs:{to:"/books"}},[t._v("Books")]):t._e()],1),t._v(" "),o("li",[t.signedIn()?o("router-link",{staticClass:"nav-link",attrs:{to:"/borrow"}},[t._v("Borrow Books")]):t._e()],1),t._v(" "),o("li",[t.signedIn()?o("router-link",{staticClass:"nav-link",attrs:{to:"/students"}},[t._v("Manage Students")]):t._e()],1),t._v(" "),o("li",[t.signedIn()?o("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut.apply(null,arguments)}}},[t._v("Sign out")]):t._e()])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#toggleMobileMenu","aria-controls":"toggleMobileMenu","aria-expanded":"false","aria-label":"Toggle Navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]},r={name:"App",components:{Header:o("VU/8")(n,a,!1,null,null,null).exports}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var l=o("VU/8")(r,i,!1,function(t){o("2AaF")},null,null).exports,c=o("/ocq"),d={name:"Signin",data:function(){return{email:"",password:"",error:""}},created:function(){this.checkSignedIn()},updated:function(){this.checkSignedIn()},methods:{signin:function(){var t=this;this.$http.plain.post("/signin",{email:this.email,password:this.password}).then(function(e){return t.signinSuccessful(e)}).catch(function(e){return t.signinFailed(e)})},signinSuccessful:function(t){return t.data.csrf||this.signinFailed(t),localStorage.csrf=t.data.csrf,localStorage.signedIn=!0,this.error="",this.$router.replace("/books"),window.location.reload(),!1},signinFailed:function(t){this.error=t.response&&t.response.data&&t.response.data.error||"",delete localStorage.csrf,delete localStorage.signedIn},checkSignedIn:function(){localStorage.signedIn&&this.$router.replace("/books")}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticStyle:{"padding-bottom":"60px","padding-left":"60px"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row no-gutters"},[t._m(0),t._v(" "),o("div",{staticClass:"col-lg-7 px-5 pt-5"},[o("h1",{staticClass:"signin-text"},[t._v("Sign in")]),t._v(" "),o("h4",{staticClass:"signin-subtext"},[t._v("Library Management System")]),t._v(" "),o("form",{on:{submit:function(e){return e.preventDefault(),t.signin.apply(null,arguments)}}},[t.error?o("div",{staticClass:"text-red"},[t._v(t._s(t.error))]):t._e(),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{staticClass:"col-lg-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control my-3 p-4",attrs:{type:"email",id:"email",placeholder:"email@address.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{staticClass:"col-lg-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control my-3 p-4",attrs:{type:"password",placeholder:"Password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),t._m(1),t._v(" "),o("div",{staticClass:"signin-links"},[t._v("Don't have an account? "),o("router-link",{staticClass:"link-grey",attrs:{to:"/signup"}},[t._v("Sign up")])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-lg-5"},[e("img",{staticClass:"img-fluid",attrs:{src:"https://i.pinimg.com/originals/d4/f3/90/d4f390d31b17e3ad216ea54aac337569.png",alt:"library-image"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-row"},[e("div",{staticClass:"col-lg-7"},[e("button",{staticClass:"btn1 mt-3 mb-5",attrs:{type:"submit"}},[this._v("Sign In")])])])}]};var v=o("VU/8")(d,u,!1,function(t){o("bG9z")},"data-v-169676b2",null).exports,p={name:"Signup",data:function(){return{email:"",password:"",password_confirmation:"",error:""}},created:function(){this.checkedSignedIn()},updated:function(){this.checkedSignedIn()},methods:{signup:function(){var t=this;this.$http.plain.post("/signup",{email:this.email,password:this.password,password_confirmation:this.password_confirmation}).then(function(e){return t.signupSuccessful(e)}).catch(function(e){return t.signupFailed(e)})},signupSuccessful:function(t){if(t.data.csrf)return localStorage.csrf=t.data.csrf,localStorage.signedIn=!0,this.error="",this.$router.replace("/books"),window.location.reload(),!1;this.signupFailed(t)},signupFailed:function(t){this.error=t.response&&t.response.data&&t.response.data.error||"Something went wrong",delete localStorage.csrf,delete localStorage.signedIn},checkedSignedIn:function(){localStorage.signedIn&&this.$router.replace("/books")}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticStyle:{"padding-bottom":"60px","padding-left":"60px"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row no-gutters"},[t._m(0),t._v(" "),o("div",{staticClass:"col-lg-7 px-5 pt-5"},[o("h1",{staticClass:"signup-text"},[t._v("Sign up")]),t._v(" "),o("h4",{staticClass:"signup-subtext"},[t._v("Library Management System")]),t._v(" "),o("form",{on:{submit:function(e){return e.preventDefault(),t.signup.apply(null,arguments)}}},[t.error?o("div",{staticClass:"text-red"},[t._v(t._s(t.error))]):t._e(),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{staticClass:"col-lg-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control my-3 p-4",attrs:{type:"email",id:"email",placeholder:"email@address.com"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{staticClass:"col-lg-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control my-3 p-4",attrs:{type:"password",placeholder:"Password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{staticClass:"col-lg-7"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control my-3 p-4",attrs:{type:"password",placeholder:"Confirm Password",id:"password_confirmation"},domProps:{value:t.password_confirmation},on:{input:function(e){e.target.composing||(t.password_confirmation=e.target.value)}}})])]),t._v(" "),t._m(1),t._v(" "),o("div",{staticClass:"signup-links"},[t._v("Already have an account? "),o("router-link",{staticClass:"link-grey",attrs:{to:"/"}},[t._v("Sign in")])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-lg-5"},[e("img",{staticClass:"img-fluid",attrs:{src:"https://i.pinimg.com/originals/d4/f3/90/d4f390d31b17e3ad216ea54aac337569.png",alt:"library-image"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-row"},[e("div",{staticClass:"col-lg-7"},[e("button",{staticClass:"btn1 mt-3 mb-5",attrs:{type:"submit"}},[this._v("Sign up")])])])}]};var f=o("VU/8")(p,m,!1,function(t){o("BRI5")},"data-v-524cc5fc",null).exports,b={name:"books",data:function(){return{books:[],newBook:[],error:"",editedBook:""}},created:function(){var t=this;localStorage.signedIn?this.$http.secured.get("/api/v1/books").then(function(e){t.books=e.data}).catch(function(e){return t.setError(e,"Something went wrong")}):this.$router.replace("/")},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},addBook:function(){var t=this;this.newBook&&this.$http.secured.post("/api/v1/books/",{book:{title:this.newBook.title,author:this.newBook.author,description:this.newBook.description,isbn:this.newBook.isbn,publisher:this.newBook.publisher,is_available:this.newBook.is_available}}).then(function(e){t.books.push(e.data),t.newBook=""}).catch(function(e){return t.setError(e,"Cannot create book")})},removeBook:function(t){var e=this;this.$http.secured.delete("/api/v1/books/"+t.id).then(function(o){e.books.splice(e.books.indexOf(t),1)}).catch(function(t){return e.setError(t,"Cannot delete book")})},editBook:function(t){this.editedBook=t},updateBook:function(t){var e=this;this.editedBook="",this.$http.secured.patch("/api/v1/books/"+t.id,{book:{title:t.title,author:t.author,description:t.description,isbn:t.isbn,publisher:t.publisher}}).catch(function(t){return e.setError(t,"Cannot update book")})}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticStyle:{"padding-bottom":"60px"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row no-gutters"},[o("div",{staticClass:"col"}),t._v(" "),o("div",{staticClass:"col-md-10 px-5 pt-5"},[o("h1",{staticClass:"addbook-text"},[t._v("Add a New Book")]),t._v(" "),o("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addBook.apply(null,arguments)}}},[o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.title,expression:"newBook.title"}],staticClass:"form-control my-2 p-3",attrs:{id:"book_title",autofocus:"",autocomplete:"off",placeholder:"Enter book name"},domProps:{value:t.newBook.title},on:{input:function(e){e.target.composing||t.$set(t.newBook,"title",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.author,expression:"newBook.author"}],staticClass:"form-control my-2 p-3",attrs:{id:"book_author",autofocus:"",autocomplete:"off",placeholder:"Enter book's author"},domProps:{value:t.newBook.author},on:{input:function(e){e.target.composing||t.$set(t.newBook,"author",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.description,expression:"newBook.description"}],staticClass:"form-control my-2 p-3",attrs:{id:"book_description",autofocus:"",autocomplete:"off",placeholder:"Enter book's description"},domProps:{value:t.newBook.description},on:{input:function(e){e.target.composing||t.$set(t.newBook,"description",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.isbn,expression:"newBook.isbn"}],staticClass:"form-control my-2 p-3",attrs:{id:"book_isbn",autofocus:"",autocomplete:"off",placeholder:"Enter book's ISBN"},domProps:{value:t.newBook.isbn},on:{input:function(e){e.target.composing||t.$set(t.newBook,"isbn",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBook.publisher,expression:"newBook.publisher"}],staticClass:"form-control my-2 p-3",attrs:{id:"book_publisher",autofocus:"",autocomplete:"off",placeholder:"Enter book's publisher"},domProps:{value:t.newBook.publisher},on:{input:function(e){e.target.composing||t.$set(t.newBook,"publisher",e.target.value)}}})])]),t._v(" "),t._m(0)]),t._v(" "),o("hr",{staticClass:"border border-grey-light my-6"}),t._v(" "),o("table",{staticClass:"table"},[t._m(1),t._v(" "),t._l(t.books,function(e){return o("tbody",{key:e.id,attrs:{book:e}},[o("tr",[o("td",[t._v(t._s(e.isbn))]),t._v(" "),o("td",[t._v(t._s(e.title))]),t._v(" "),o("td",[t._v(t._s(e.author))]),t._v(" "),1==e.is_available?o("td",[t._v("Available")]):o("td",[t._v("Unavailable")]),t._v(" "),o("td",[o("button",{staticClass:"btn btn-success",on:{click:function(o){return o.preventDefault(),t.editBook(e)}}},[t._v("Edit")]),t._v(" "),o("button",{staticClass:"btn btn-danger",on:{click:function(o){return o.preventDefault(),t.removeBook(e)}}},[t._v("Delete")])])]),t._v(" "),e==t.editedBook?o("div",{staticClass:"form-row"},[o("form",{attrs:{action:""},on:{submit:function(o){return o.preventDefault(),t.updateBook(e)}}},[o("div",{staticClass:"mb-6 p-4 bg-white rounded border border-grey-light mt-4"},[o("div",{staticClass:"mb-3"},[o("label",{staticClass:"label"},[t._v("Title")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"book.title"}],staticClass:"form-control my-2 p-3",domProps:{value:e.title},on:{input:function(o){o.target.composing||t.$set(e,"title",o.target.value)}}})]),t._v(" "),o("div",{staticClass:"mb-3"},[o("label",{staticClass:"label"},[t._v("Author")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.author,expression:"book.author"}],staticClass:"form-control my-2 p-3",domProps:{value:e.author},on:{input:function(o){o.target.composing||t.$set(e,"author",o.target.value)}}})]),t._v(" "),o("div",{staticClass:"mb-3"},[o("label",{staticClass:"label"},[t._v("ISBN")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.isbn,expression:"book.isbn"}],staticClass:"form-control my-2 p-3",domProps:{value:e.isbn},on:{input:function(o){o.target.composing||t.$set(e,"isbn",o.target.value)}}})]),t._v(" "),o("div",{staticClass:"mb-3"},[o("label",{staticClass:"label"},[t._v("Description")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"book.description"}],staticClass:"form-control my-2 p-3",domProps:{value:e.description},on:{input:function(o){o.target.composing||t.$set(e,"description",o.target.value)}}})]),t._v(" "),o("div",{staticClass:"mb-3"},[o("label",{staticClass:"label"},[t._v("Publisher")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.publisher,expression:"book.publisher"}],staticClass:"form-control my-2 p-3",domProps:{value:e.publisher},on:{input:function(o){o.target.composing||t.$set(e,"publisher",o.target.value)}}})]),t._v(" "),o("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Update"}})])])]):t._e()])})],2)]),t._v(" "),o("div",{staticClass:"col"})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-row"},[e("div",{},[e("button",{staticClass:"btn1 mt-3 mb-3",attrs:{type:"submit",value:"Add Book"}},[this._v("Add Book")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("ISBN")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Title")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Author")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Availability")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Action")])])])}]};var _=o("VU/8")(b,h,!1,function(t){o("lCbo")},"data-v-ae8bf5ba",null).exports,g={name:"students",data:function(){return{students:[],newStudent:[],error:"",editedStudent:""}},created:function(){var t=this;localStorage.signedIn?this.$http.secured.get("/api/v1/students").then(function(e){t.students=e.data}).catch(function(e){return t.setError(e,"Something went wrong")}):this.$router.replace("/")},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},addStudent:function(){var t=this;this.newStudent&&this.$http.secured.post("/api/v1/students/",{student:{lrn:this.newStudent.lrn,firstname:this.newStudent.firstname,lastname:this.newStudent.lastname}}).then(function(e){t.students.push(e.data),t.newStudent=""}).catch(function(e){return t.setError(e,"Cannot create student")})},removeStudent:function(t){var e=this;this.$http.secured.delete("/api/v1/students/"+t.id).then(function(o){e.students.splice(e.students.indexOf(t),1)}).catch(function(t){return e.setError(t,"Cannot delete student")})},editStudent:function(t){this.editedStudent=t},updateStudent:function(t){var e=this;this.editedStudent="",this.$http.secured.patch("/api/v1/students/"+t.id,{student:{lrn:t.lrn,firstname:t.firstname,lastname:t.lastname}}).catch(function(t){return e.setError(t,"Cannot update student")})}}},w={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticStyle:{"padding-bottom":"60px"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row no-gutters"},[o("div",{staticClass:"col"}),t._v(" "),o("div",{staticClass:"col-md-10 px-5 pt-5"},[o("h1",{staticClass:"addstudent-text"},[t._v("Add a New Student")]),t._v(" "),o("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addStudent.apply(null,arguments)}}},[o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.lrn,expression:"newStudent.lrn"}],staticClass:"form-control my-2 p-3",attrs:{id:"student_title",autofocus:"",autocomplete:"off",placeholder:"Enter student's LRN"},domProps:{value:t.newStudent.lrn},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"lrn",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.firstname,expression:"newStudent.firstname"}],staticClass:"form-control my-2 p-3",attrs:{id:"student_author",autofocus:"",autocomplete:"off",placeholder:"Enter student's first name"},domProps:{value:t.newStudent.firstname},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"firstname",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-row"},[o("div",{},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newStudent.lastname,expression:"newStudent.lastname"}],staticClass:"form-control my-2 p-3",attrs:{id:"student_description",autofocus:"",autocomplete:"off",placeholder:"Enter student's last name"},domProps:{value:t.newStudent.lastname},on:{input:function(e){e.target.composing||t.$set(t.newStudent,"lastname",e.target.value)}}})])]),t._v(" "),t._m(0)]),t._v(" "),o("hr",{staticClass:"border border-grey-light my-6"}),t._v(" "),o("table",{staticClass:"table"},[t._m(1),t._v(" "),t._l(t.students,function(e){return o("tbody",{key:e.id,attrs:{student:e}},[o("tr",[o("td",[t._v(t._s(e.lrn))]),t._v(" "),o("td",[t._v(t._s(e.firstname))]),t._v(" "),o("td",[t._v(t._s(e.lastname))]),t._v(" "),o("td",[o("button",{staticClass:"btn btn-success",on:{click:function(o){return o.preventDefault(),t.editStudent(e)}}},[t._v("Edit")]),t._v(" "),o("button",{staticClass:"btn btn-danger",on:{click:function(o){return o.preventDefault(),t.removeStudent(e)}}},[t._v("Delete")])])]),t._v(" "),e==t.editedStudent?o("div",[o("form",{attrs:{action:""},on:{submit:function(o){return o.preventDefault(),t.updateStudent(e)}}},[o("div",{staticClass:"mb-6 p-4 bg-white rounded border border-grey-light mt-4"},[o("div",{staticClass:"mb-3"},[o("label",{staticClass:"label"},[t._v("LRN")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.lrn,expression:"student.lrn"}],staticClass:"form-control my-2 p-3",domProps:{value:e.lrn},on:{input:function(o){o.target.composing||t.$set(e,"lrn",o.target.value)}}})]),t._v(" "),o("div",{staticClass:"mb-6"},[o("label",{staticClass:"label"},[t._v("Firstname")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.firstname,expression:"student.firstname"}],staticClass:"form-control my-2 p-3",domProps:{value:e.firstname},on:{input:function(o){o.target.composing||t.$set(e,"firstname",o.target.value)}}})]),t._v(" "),o("div",{staticClass:"mb-6"},[o("label",{staticClass:"label"},[t._v("Lastname")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.lastname,expression:"student.lastname"}],staticClass:"form-control my-2 p-3",domProps:{value:e.lastname},on:{input:function(o){o.target.composing||t.$set(e,"lastname",o.target.value)}}})]),t._v(" "),o("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Update"}})])])]):t._e()])})],2)]),t._v(" "),o("div",{staticClass:"col"})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-row"},[e("div",{},[e("button",{staticClass:"btn1 mt-3 mb-3",attrs:{type:"submit",value:"Add Student"}},[this._v("Add Student")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("LRN")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Firstname")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Lastname")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Action")])])])}]};var k=o("VU/8")(g,w,!1,function(t){o("mSk8")},"data-v-63777421",null).exports,C={name:"books",data:function(){return{borrowedBooks:[],books:[],availableBooks:[],students:[],newBorrowedbook:[],error:"",editedBorrowedbook:"",returnedBorrowedbook:""}},created:function(){var t=this;localStorage.signedIn?(this.$http.secured.get("/api/v1/borrowed_books").then(function(e){t.borrowedBooks=e.data}).catch(function(e){return t.setError(e,"Something went wrong with fetching borrowed books")}),this.$http.secured.get("/api/v1/books").then(function(e){t.books=e.data}).catch(function(e){return t.setError(e,"Something went wrong with fetching books")}),this.$http.secured.get("/api/v1/books/available").then(function(e){t.availableBooks=e.data}).catch(function(e){return t.setError(e,"Something went wrong with fetching available books")}),this.$http.secured.get("/api/v1/students").then(function(e){t.students=e.data}).catch(function(e){return t.setError(e,"Something went wrong with fetching students")})):this.$router.replace("/")},methods:{setError:function(t,e){this.error=t.response&&t.response.data&&t.response.data.error||e},getBook:function(t){var e=this.books.filter(function(e){return e.id===t.book_id}),o=void 0;return e.forEach(function(t){o=t.title}),o},getStudent:function(t){var e=this.students.filter(function(e){return e.id===t.student_id}),o=void 0;return e.forEach(function(t){o=t.lastname+", "+t.firstname}),o},addBorrowedbook:function(){var t=this;this.newBorrowedbook&&this.$http.secured.post("/api/v1/borrowed_books/",{borrowed_book:{book_id:this.newBorrowedbook.availableBook,student_id:this.newBorrowedbook.student}}).then(function(e){return t.borrowedBooks.push(e.data),t.newBorrowedbook="",window.location.reload(),!1}).catch(function(e){return t.setError(e,"Cannot create record")})},removeBorrowedbook:function(t){var e=this;this.$http.secured.delete("/api/v1/borrowed_books/"+t.id).then(function(o){return e.borrowedBooks.splice(e.borrowedBooks.indexOf(t),1),window.location.reload(),!1}).catch(function(t){return e.setError(t,"Cannot delete record")})},editBorrowedbook:function(t){this.editedBorrowedbook=t},returnBorrowedbook:function(t){var e=this;this.$http.secured.post("/api/v1/borrowed_books/"+t.id+"/return_book/").then(function(t){return e.borrowedBooks.push(t.data),window.location.reload(),!1}).catch(function(t){return e.setError(t,"Cannot return book")})},updateBorrowedbook:function(t){var e=this;return this.editedBorrowedbook="",this.$http.secured.patch("/api/v1/borrowed_books/"+t.id,{borrowed_book:{book_id:t.book,student_id:t.student}}).catch(function(t){return e.setError(t,"Cannot update record")}),window.location.reload(),!1}}},S={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticStyle:{"padding-bottom":"60px"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row no-gutters"},[o("div",{staticClass:"col-md-1"}),t._v(" "),o("div",{staticClass:"col-md-10 px-5 pt-5"},[o("h1",{staticClass:"addbook-text"},[t._v("New Borrow Record")]),t._v(" "),o("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.addBorrowedbook.apply(null,arguments)}}},[o("div",{staticClass:"mb-3"},[o("div",[t._m(0),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.newBorrowedbook.availableBook,expression:"newBorrowedbook.availableBook"}],staticClass:"form-select",attrs:{id:"book","aria-label":"Default select example",required:"true"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newBorrowedbook,"availableBook",e.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("Select a Book")]),t._v(" "),t._l(t.availableBooks,function(e){return o("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),o("p",{staticClass:"pt-4",staticStyle:{"margin-bottom":"2rem"}},[t._v("Don't see a book? "),o("router-link",{staticClass:"text-grey-darker underline",attrs:{to:"/books"}},[t._v("Create one")])],1)])]),t._v(" "),o("div",{staticClass:"mb-3"},[o("div",{},[t._m(1),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.newBorrowedbook.student,expression:"newBorrowedbook.student"}],staticClass:"form-select",attrs:{id:"book","aria-label":"Default select example",required:"true"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.newBorrowedbook,"student",e.target.multiple?o:o[0])}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("Select a Student")]),t._v(" "),t._l(t.students,function(e){return o("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.lastname)+", "+t._s(e.firstname))])})],2),t._v(" "),o("p",{staticClass:"pt-4",staticStyle:{"margin-bottom":"2rem"}},[t._v("Don't see a student? "),o("router-link",{staticClass:"text-grey-darker underline",attrs:{to:"/students"}},[t._v("Go here")])],1)])]),t._v(" "),t._m(2)]),t._v(" "),o("hr",{staticClass:"border border-grey-light my-6"}),t._v(" "),o("table",{staticClass:"table"},[t._m(3),t._v(" "),t._l(t.borrowedBooks,function(e){return o("tbody",{key:e.id,attrs:{borrowedBook:e}},[o("tr",[o("td",[t._v(t._s(e.created_at))]),t._v(" "),o("td",[t._v(t._s(t.getBook(e)))]),t._v(" "),o("td",[t._v(t._s(t.getStudent(e)))]),t._v(" "),e.return_date==t.nil?o("td",[t._v("Unreturned")]):o("td",[t._v("Returned")]),t._v(" "),o("td",[o("button",{staticClass:"btn btn-success",on:{click:function(o){return o.preventDefault(),t.editBorrowedbook(e)}}},[t._v("Edit")]),t._v(" "),o("button",{staticClass:"btn btn-danger",on:{click:function(o){return o.preventDefault(),t.removeBorrowedbook(e)}}},[t._v("Delete")]),t._v(" "),null==e.return_date?o("div",[o("button",{staticClass:"btn btn-warning",staticStyle:{"margin-top":"5px"},on:{click:function(o){return o.preventDefault(),t.returnBorrowedbook(e)}}},[t._v("Return")])]):t._e()])]),t._v(" "),e==t.editedBorrowedbook?o("div",[o("form",{attrs:{action:""},on:{submit:function(o){return o.preventDefault(),t.updateBorrowedbook(e)}}},[o("div",{staticClass:"form-row"},[o("div",[o("label",{staticClass:"label"},[t._v("Book")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.book,expression:"borrowedBook.book"}],staticClass:"form-select",attrs:{id:"book",required:"true","aria-label":"Default select example"},on:{change:function(o){var s=Array.prototype.filter.call(o.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"book",o.target.multiple?s:s[0])}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("Select a Book")]),t._v(" "),t._l(t.books,function(e){return o("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),o("label",{staticClass:"label"},[t._v("Student")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.student,expression:"borrowedBook.student"}],staticClass:"form-select",staticStyle:{"margin-bottom":"30px"},attrs:{id:"book",required:"true","aria-label":"Default select example"},on:{change:function(o){var s=Array.prototype.filter.call(o.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"student",o.target.multiple?s:s[0])}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("Select a Student")]),t._v(" "),t._l(t.students,function(e){return o("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.lastname))])})],2),t._v(" "),o("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Update"}})])])])]):t._e()])})],2)]),t._v(" "),o("div",{staticClass:"col-md-1"})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"book"}},[e("b",[this._v("Select Book")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"label",attrs:{for:"book"}},[e("b",[this._v("Select Student")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mb-3"},[e("div",{},[e("button",{staticClass:"btn1 mt-3 mb-3",attrs:{type:"submit",value:"Add Book"}},[this._v("Add Record")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("Borrow Date")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Book Title")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Student Name")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),o("th",{attrs:{scope:"col"}},[t._v("Action")])])])}]};var B=o("VU/8")(C,S,!1,function(t){o("J+Sg")},"data-v-91c77b46",null).exports;s.default.use(c.a);var y=new c.a({routes:[{path:"/",name:"Signin",component:v},{path:"/signup",name:"Signup",component:f},{path:"/books",name:"Books",component:_},{path:"/students",name:"Students",component:k},{path:"/borrow",name:"BorrowBooks",component:B}]}),x=o("DWlv"),$=o.n(x),E=o("//Fk"),N=o.n(E),I=o("Dd8w"),P=o.n(I),D=o("mtWM"),A=o.n(D),F="https://libsys-api-tf5vy.ondigitalocean.app",R=A.a.create({baseURL:F,withCredentials:!0,headers:{"Content-Type":"application/json"}}),U=A.a.create({baseURL:F,withCredentials:!0,headers:{"Content-Type":"application/json"}});R.interceptors.request.use(function(t){var e=t.method.toUpperCase();return"OPTIONS"!==e&&"GET"!==e&&(t.headers=P()({},t.headers,{"X-CSRF-TOKEN":localStorage.csrf})),t}),R.interceptors.response.use(null,function(t){return t.response&&t.response.config&&401===t.response.status?U.post("/refresh",{},{headers:{"X-CSRF-TOKEN":localStorage.csrf}}).then(function(e){localStorage.csrf=e.data.csrf,localStorage.signedIn=!0;var o=t.response.config;return o.headers["X-CSRF-TOKEN"]=localStorage.csrf,U.request(o)}).catch(function(t){return delete localStorage.csrf,delete localStorage.signedIn,location.replace("/"),N.a.reject(t)}):N.a.reject(t)});var M=o("Tqaz");o("Jmt5"),o("9M+g");s.default.config.productionTip=!1,s.default.use($.a,{secured:R,plain:U}),s.default.use(M.a),s.default.use(M.b),new s.default({el:"#app",router:y,securedAxiosInstance:R,plainAxiosInstance:U,components:{App:l},template:"<App/>"})},bG9z:function(t,e){},lCbo:function(t,e){},mSk8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.165754c2e5c596552458.js.map